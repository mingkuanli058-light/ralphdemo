# function_map.md  
## 原始功能 ↔ 实现文件对照表（工程地图）

本文件用于描述 **业务功能与代码实现之间的事实对应关系**，  
用于 **规划阶段定位能力、避免误判“功能不存在”**。

---

## 使用说明（非常重要）

- 本文件是 **事实参照（Ground Truth）**，不是任务列表
- 不表示功能是否“完成 / 正确 / 合规”
- 不进入 `IMPLEMENTATION_PLAN.md`
- 不作为 BUILD 阶段的直接执行依据
- 仅用于 **Planning / Investigation 阶段辅助判断**

---

## 维护原则

- 只记录 **“功能 ↔ 代码位置” 的客观对应**
- 不记录修改历史、不记录问题描述
- 不评价实现质量
- 若实现位置不唯一，可列多个文件
- 若功能存在但实现分散，应如实记录

---

## 功能对照总表(参考)

| 功能编号 | 功能名称 | 子系统 / 模块 | 主要实现位置 | 相关文件 | 备注 |
|---------|----------|---------------|--------------|----------|------|
| F-01 | 嫌疑人入区登记 | 入区管理 | 后端服务 | `src/xyr/register.py` | 历史实现 |
| F-02 | 嫌疑人信息查询 | 入区管理 | 后端服务 | `src/xyr/query.py` | |
| F-03 | 笔录回传 | 笔录模块 | 后端服务 | `src/bl/upload.py` | 含兼容逻辑 |
| F-04 | 视频轨迹分析 | 视频治理 | 算法服务 | `src/video/track.py` | 新能力 |
| F-05 | 房间信息管理 | 基础数据 | 后端服务 | `src/room/manage.py` | |

---

## 详细功能映射（参考-可选）

> 当功能实现较复杂或分散时，可在此展开说明。

### F-04 视频轨迹分析

- **功能描述**：  
  对执法办案区域视频进行人员轨迹分析，用于回放与关联展示。

- **主要实现文件**：
  - `src/video/track.py`
  - `src/video/reid.py`

- **辅助模块**：
  - `src/lib/yolo_pool.py`
  - `src/lib/input_shaper.py`

- **相关数据表（参考）**：
  - `sacw_hdgj`
  - `sacw_composite_event`

- **说明**：
  - 本功能存在多版本实现历史
  - 当前仍保留兼容路径

---

## 已知但未纳入映射的区域（可选）

> 用于标记当前工程地图尚不完整的地方，仅作提醒。

- 某些早期脚本散落在 `scripts/legacy/`
- 个别接口逻辑内嵌在 Controller 中，尚未拆分

---

## 重要声明

- 本文件仅用于 **事实对照**
- 不作为需求规格
- 不作为缺陷列表
- 不作为执行计划来源

如需新增、修改或重构功能，应以 `specs/*.md` 与  
`IMPLEMENTATION_PLAN.md` 为准。
