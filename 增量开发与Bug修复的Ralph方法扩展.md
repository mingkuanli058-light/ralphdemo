 增量开发与Bug修复的Ralph方法扩展

  核心原则：最小上下文，精准定位

  现有Ralph方法的"从0到1"模式每次循环会加载完整的specs和代码库，这对增量场景会浪费token。解决方案是引入增量模式提示词。

  ---
  场景1：新增/变更需求

  推荐流程：

  1. 修改 specs/我的任务.md（追加或修改需求）
           ↓
  2. 只跑一次 PLANNING（重新生成IMPLEMENTATION_PLAN.md）
           ↓
  3. 进入 BUILDING 循环

  省token的关键做法：
  ┌─────────────────┬──────────────────────────────────────────────────────────────────────────────┐
  │      做法       │                                     说明                                     │
  ├─────────────────┼──────────────────────────────────────────────────────────────────────────────┤
  │ 增量spec        │ 不重写整个specs，而是在末尾追加## 变更记录节，标注日期和变更内容             │
  ├─────────────────┼──────────────────────────────────────────────────────────────────────────────┤
  │ 规划时的Gap分析 │ PROMPT_plan.md已有"don't assume not implemented"原则，会自动跳过已完成的部分 │
  ├─────────────────┼──────────────────────────────────────────────────────────────────────────────┤
  │ 单次规划        │ 规划只需跑一次，不需要循环                                                   │
  └─────────────────┴──────────────────────────────────────────────────────────────────────────────┘
  ---
  场景2：修改Bug

  推荐方案：新建一个PROMPT_fix.md（修复模式）

  # PROMPT_fix.md - Bug修复模式

  ## 0. 学习（最小范围）
  - 读取 AGENTS.md
  - 读取本次bug描述（从specs/bugs/或命令行参数）

  ## 1. 定位
  - 根据bug描述搜索相关代码（使用grep/glob）
  - 找到问题根因

  ## 2. 修复
  - 最小改动原则
  - 不做额外重构

  ## 3. 验证
  - 运行相关测试
  - 测试通过才提交

  ## 4. 记录
  - 在 IMPLEMENTATION_PLAN.md 的末尾追加：
    ## Bug修复记录
    - [日期] 问题描述 | 修复文件 | 根因

  token优化：
  - 不加载完整specs：bug修复不需要理解全部需求
  - 精准定位：只读取相关的2-3个文件
  - 跳过规划阶段：bug通常是明确的点状问题

  ---
  建议的文件结构扩展

  specs/
  ├── 我的任务.md         # 主需求（含变更记录）
  └── bugs/               # 新增：bug描述目录
      └── BUG_001.md      # 单个bug描述文件

  PROMPT_plan.md          # 规划模式（保持不变）
  PROMPT_build.md         # 构建模式（保持不变）
  PROMPT_fix.md           # 新增：修复模式（轻量）

  ---
  Bug描述模板（specs/bugs/BUG_xxx.md）

  # BUG_001: 身份证校验未拦截15位旧格式

  ## 现象
  输入15位身份证号时系统接受了

  ## 预期
  应提示"请输入18位身份证号"

  ## 复现步骤
  1. 打开录入页面
  2. 输入 110101850101001
  3. 点击保存

  ## 相关文件（可选）
  - src/validators.py

  ---
  Token消耗对比
  ┌──────────┬───────────────────┬───────────────────┬──────┐
  │   场景   │     传统方式      │     增量方式      │ 节省 │
  ├──────────┼───────────────────┼───────────────────┼──────┤
  │ 新增需求 │ 全量规划+全量构建 │ 增量规划+增量构建 │ ~50% │
  ├──────────┼───────────────────┼───────────────────┼──────┤
  │ Bug修复  │ 全量规划+全量构建 │ 直接修复模式      │ ~70% │
  └──────────┴───────────────────┴───────────────────┴──────┘
  ---
  实施建议

  1. 立即可做：在specs/我的任务.md中增加## 变更记录节
  2. 推荐创建：新建PROMPT_fix.md用于bug修复
  3. 可选优化：修改loop.ps1支持三种模式参数（plan/build/fix）
